/* empty css                 */import{D as yl,G as I,d as Ke,r as m,a as ye,p as ue,q as Je,c as f,m as s,b as e,k as We,w as l,l as g,f as nl,i as dl,H as il,F as X,v as Y,g as ae,h as q,t as b,I as rl,J as bl,K as wl,L as ul,M as v,N as hl,O as Fe,P as kl,Q as Cl,R as el,S as qe,j as Qe,T as cl,U as ml,V as pl,W as $l,x as vl,n as _,X as Se,_ as Vl,Y as Pl,o as u,Z as fl,C as Ml,u as xl,e as Al,$ as Il,a0 as Ul,a1 as Sl,a2 as El,a3 as zl,a4 as ll,a5 as al,a6 as tl,a7 as Ue,a8 as Tl,a9 as Dl,aa as Gl,ab as Ll,ac as Ol,ad as je,ae as Rl,af as Bl,ag as Nl,ah as sl,ai as jl,aj as Fl,ak as ql,E as Hl,z as ol,al as Kl,am as Jl,an as Wl,ao as Ql}from"./index-CejgMfXA.js";import{_ as Xe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{k as Xl}from"./marked.esm-z4go5P_g.js";const Ye=yl("admin",()=>({getUsers:async()=>(await I.get("/admin/users")).users,getUser:async d=>await I.get(`/admin/users/${d}`),updateUserPassword:async(d,i)=>{await I.put(`/admin/users/${d}/password`,{new_password:i})},deleteUser:async d=>{await I.delete(`/admin/users/${d}`)},toggleUserAdmin:async d=>{await I.put(`/admin/users/${d}/toggle-admin`)},getProviders:async()=>(await I.get("/admin/providers")).providers,getProvider:async d=>await I.get(`/admin/providers/${d}`),createProvider:async d=>await I.post("/admin/providers",d),updateProvider:async(d,i)=>await I.put(`/admin/providers/${d}`,i),deleteProvider:async d=>{await I.delete(`/admin/providers/${d}`)},toggleProvider:async d=>await I.put(`/admin/providers/${d}/toggle`),getAvailableModels:async(d,i)=>{const r=i?`/admin/providers/${d}/models/available?api_type=${i}`:`/admin/providers/${d}/models/available`;return(await I.get(r)).models},testConnection:async(d,i)=>{const r=i?`/admin/providers/${d}/test?model_id=${i}`:`/admin/providers/${d}/test`;return await I.get(r)},getModels:async d=>{const i=d?`/admin/models?provider_id=${d}`:"/admin/models";return(await I.get(i)).models},getModel:async d=>await I.get(`/admin/models/${d}`),createModel:async d=>await I.post("/admin/models",d),updateModel:async(d,i)=>await I.put(`/admin/models/${d}`,i),deleteModel:async d=>{await I.delete(`/admin/models/${d}`)},toggleModel:async d=>await I.put(`/admin/models/${d}/toggle`),testModel:async d=>await I.post(`/admin/models/${d}/test`),updateModelCapabilities:async(d,i)=>await I.put(`/admin/models/${d}/capabilities`,{capabilities:i})})),Yl={class:"provider-management"},Zl={class:"game-ai-config",style:{"margin-bottom":"24px"}},ea={class:"config-header"},la={class:"config-content"},aa={class:"default-model-selectors"},ta={class:"game-model-list"},sa={class:"game-info"},oa={class:"game-name"},na={class:"model-selectors"},da={key:0,class:"no-games"},ia={style:{"margin-bottom":"24px"}},ra={class:"page-header"},ua={key:0,class:"empty-state"},ca={key:1,class:"providers-list"},ma={class:"provider-header"},pa={class:"provider-title"},va={style:{margin:"0 8px","font-size":"16px","font-weight":"500"}},fa={class:"provider-actions"},_a={class:"provider-fields"},ga={class:"field-item"},ya={class:"field-item"},ba={class:"field-label"},wa={key:0,style:{"font-size":"12px",color:"#909399"}},ha={class:"models-header"},ka={class:"field-label"},Ca={class:"models-list"},$a={key:0,class:"models-empty"},Va={class:"model-info"},Pa={class:"model-name"},Ma={class:"model-actions"},xa={class:"provider-types"},Aa=["onClick"],Ia={key:0,style:{"margin-left":"12px",color:"#67c23a"}},Ua={class:"model-select-list"},Sa=["onClick"],Ea={key:0,class:"model-select-empty"},za=Ke({__name:"ProviderManagement",setup(he){const C=Ye(),D=m([]),W=m(!1),$=m(!1),k=m(!1),E=m(!1),x=m(!1),V=m(null),A=m(null),w=m(null),G=m(!1),L=m([]),B=m(""),N=m(""),H=m(null),z=m([]),U=ye({defaultModelId:"",gameModels:{}}),j=m(!1),O=m(null),Z=m(""),d=ye({}),i=ye({}),r=ue(()=>D.value.filter(a=>a.enabled)),K=ue(()=>{const a=[];for(const t of D.value)if(t.models)for(const p of t.models)p.enabled&&t.enabled&&a.push({...p,provider:t});return a}),Q=ue(()=>O.value?K.value.filter(a=>a.provider_id===O.value):[]),fe=a=>{const t=d[a];return t?K.value.filter(p=>p.provider_id===t):[]},T=m({type:"openai",name:"",api_key:"",base_url:""}),S=m({model_id:"",name:"",api_type:"openai",provider_id:0}),P=[{value:"openai",label:"OpenAI",description:"GPT-4, GPT-3.5ç­‰æ¨¡å‹"},{value:"anthropic",label:"Anthropic",description:"Claudeç³»åˆ—æ¨¡å‹"},{value:"google",label:"Google",description:"Geminiç³»åˆ—æ¨¡å‹"},{value:"custom",label:"è‡ªå®šä¹‰",description:"å…¼å®¹OpenAIæ ¼å¼çš„API"}],ce=ue(()=>{if(!B.value.trim())return L.value;const a=B.value.toLowerCase().trim().split(/\s+/);return L.value.filter(t=>{const p=t.toLowerCase();return a.every(R=>p.includes(R))})}),be=a=>({openai:"OpenAI",anthropic:"Anthropic",google:"Google",custom:"è‡ªå®šä¹‰"})[a]||a,h=a=>({openai:"success",anthropic:"",google:"warning",custom:"info"})[a]||"info",o=a=>({openai:"https://api.openai.com/v1/chat/completions",anthropic:"https://api.anthropic.com/v1/messages",google:"https://generativelanguage.googleapis.com/v1beta",custom:"https://api.example.com/v1"})[a]||"",y=a=>({openai:"OpenAI",anthropic:"Claude",google:"Gemini"})[a]||a,ee=a=>({openai:"success",anthropic:"",google:"warning"})[a]||"info",ne=async()=>{W.value=!0;try{D.value=await C.getProviders()}catch(a){_.error(a.message||"åŠ è½½æä¾›å•†å¤±è´¥")}finally{W.value=!1}},Ee=a=>{$.value=!1,T.value={type:a,name:be(a),api_key:"",base_url:""},k.value=!0},J=a=>{V.value=a,T.value={type:a.type,name:a.name,api_key:a.api_key,base_url:a.base_url||""},k.value=!0},ke=async a=>{try{await C.toggleProvider(a.id)}catch(t){a.enabled=!a.enabled,_.error(t.message||"æ“ä½œå¤±è´¥")}},Ce=async a=>{try{await C.updateProvider(a.id,{api_key:a.api_key,base_url:a.base_url})}catch(t){_.error(t.message||"æ›´æ–°å¤±è´¥")}},_e=async a=>{try{await Se.confirm(`ç¡®å®šè¦åˆ é™¤æä¾›å•† "${a.name}" å—ï¼Ÿè¿™å°†åŒæ—¶åˆ é™¤å…¶æ‰€æœ‰æ¨¡å‹é…ç½®ã€‚`,"ç¡®è®¤åˆ é™¤",{type:"warning"}),await C.deleteProvider(a.id),_.success("åˆ é™¤æˆåŠŸ"),await ne()}catch(t){t!=="cancel"&&_.error(t.message||"åˆ é™¤å¤±è´¥")}},$e=async()=>{if(!T.value.name||!T.value.api_key){_.warning("è¯·å¡«å†™å¿…å¡«é¡¹");return}x.value=!0;try{V.value?(await C.updateProvider(V.value.id,T.value),_.success("æ›´æ–°æˆåŠŸ")):(await C.createProvider(T.value),_.success("æ·»åŠ æˆåŠŸ")),k.value=!1,V.value=null,await ne()}catch(a){_.error(a.message||"ä¿å­˜å¤±è´¥")}finally{x.value=!1}},Ve=a=>{w.value=a,A.value=null,S.value={model_id:"",name:"",api_type:a.type==="custom"?"openai":a.type,provider_id:a.id},L.value=[],B.value="",N.value="",E.value=!0},ze=(a,t)=>{w.value=a,A.value=t,S.value={model_id:t.model_id,name:t.name,api_type:t.api_type||a.type,provider_id:a.id},L.value=[],B.value="",N.value="",E.value=!0},de=async a=>{try{await C.toggleModel(a.id)}catch(t){a.enabled=!a.enabled,_.error(t.message||"æ“ä½œå¤±è´¥")}},ge=async(a,t)=>{try{await Se.confirm(`ç¡®å®šè¦åˆ é™¤æ¨¡å‹ "${t.name}" å—ï¼Ÿ`,"ç¡®è®¤åˆ é™¤",{type:"warning"}),await C.deleteModel(t.id),_.success("åˆ é™¤æˆåŠŸ"),await ne()}catch(p){p!=="cancel"&&_.error(p.message||"åˆ é™¤å¤±è´¥")}},Te=async(a,t)=>{H.value=t.id;try{const{AIService:p}=await Vl(async()=>{const{AIService:se}=await Promise.resolve().then(()=>Da);return{AIService:se}},void 0),R=await p.testConnection({provider_id:a.id,model_id:t.model_id,api_type:t.api_type||a.type});R.success?_.success(`æ¨¡å‹ "${t.name}" è¿æ¥æµ‹è¯•æˆåŠŸ`):_.error(`æµ‹è¯•å¤±è´¥: ${R.message}`)}catch(p){_.error(`æµ‹è¯•å¤±è´¥: ${p.message}`)}finally{H.value=null}},me=()=>{L.value=[],N.value=""},Pe=async()=>{if(w.value){G.value=!0,N.value="";try{const a=await C.getAvailableModels(w.value.id,S.value.api_type);L.value=a,a.length===0?N.value="æœªæ‰¾åˆ°å¯ç”¨æ¨¡å‹":_.success(`è·å–åˆ° ${a.length} ä¸ªæ¨¡å‹`)}catch(a){N.value=a.message||"è·å–æ¨¡å‹åˆ—è¡¨å¤±è´¥ï¼Œè¯·æ£€æŸ¥APIå¯†é’¥å’ŒURLé…ç½®"}finally{G.value=!1}}},De=a=>{S.value.model_id=a,S.value.name=a},pe=async()=>{if(!S.value.model_id||!S.value.name){_.warning("è¯·å¡«å†™æ¨¡å‹IDå’Œåç§°");return}x.value=!0;try{A.value?(await C.updateModel(A.value.id,S.value),_.success("æ›´æ–°æˆåŠŸ")):(await C.createModel(S.value),_.success("æ·»åŠ æˆåŠŸ")),te(),await ne()}catch(a){_.error(a.message||"ä¿å­˜å¤±è´¥")}finally{x.value=!1}},te=()=>{E.value=!1,A.value=null,w.value=null,L.value=[],B.value="",N.value=""},Ge=async()=>{try{const a=await fetch("/api/game/mods",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(a.ok){z.value=await a.json();for(const t of z.value)t.game_id in U.gameModels||(U.gameModels[t.game_id]="")}}catch(a){console.error("åŠ è½½æ¸¸æˆåˆ—è¡¨å¤±è´¥:",a)}},Me=async()=>{try{const a=await fetch("/api/admin/game/model-config",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(a.ok){const t=await a.json();U.defaultModelId=String(t.default_model_id||"");const p={};if(t.game_models)for(const[R,se]of Object.entries(t.game_models))p[R]=String(se||"");U.gameModels=p,console.log("æ¸¸æˆé…ç½®åŠ è½½å®Œæˆ"),ve()}}catch(a){console.error("åŠ è½½æ¸¸æˆé…ç½®å¤±è´¥:",a)}},Le=async()=>{j.value=!0;try{const a=await fetch("/api/admin/game/model-config",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({default_model_id:U.defaultModelId,game_models:U.gameModels})});if(a.ok)_.success("æ¸¸æˆAIé…ç½®å·²ä¿å­˜");else{const t=await a.json();_.error(t.error||"ä¿å­˜å¤±è´¥")}}catch(a){_.error(a.message||"ä¿å­˜å¤±è´¥")}finally{j.value=!1}},xe=()=>{Z.value="",c()},Oe=()=>{c()},Re=a=>{i[a]="",ie(a)},Ae=a=>{ie(a)},c=()=>{if(Z.value){const a=Q.value.find(t=>t.model_id===Z.value);U.defaultModelId=a?String(a.id):""}else U.defaultModelId=""},ie=a=>{if(i[a]){const p=fe(a).find(R=>R.model_id===i[a]);U.gameModels[a]=p?String(p.id):""}else U.gameModels[a]=""},ve=()=>{if(U.defaultModelId){const a=K.value.find(t=>String(t.id)===U.defaultModelId);a&&(O.value=a.provider_id,Z.value=a.model_id)}for(const[a,t]of Object.entries(U.gameModels))if(t){const p=K.value.find(R=>String(R.id)===t);p&&(d[a]=p.provider_id,i[a]=p.model_id)}};return Je(async()=>{await ne(),await Me(),await Ge()}),(a,t)=>{const p=We,R=ml,se=il,le=dl,Ie=rl,Be=nl,_l=bl,oe=ul,Ze=kl,re=Qe,Ne=cl,gl=Pl;return u(),f("div",Yl,[s("div",Zl,[s("div",ea,[t[15]||(t[15]=s("h3",null,"ğŸ® æ¸¸æˆAIé…ç½®",-1)),e(p,{type:"success",size:"small",onClick:Le,loading:j.value},{default:l(()=>[...t[14]||(t[14]=[g(" ä¿å­˜é…ç½® ",-1)])]),_:1},8,["loading"])]),s("div",la,[e(Be,{"label-width":"120px"},{default:l(()=>[e(le,{label:"é»˜è®¤æ¨¡å‹"},{default:l(()=>[s("div",aa,[e(se,{modelValue:O.value,"onUpdate:modelValue":t[0]||(t[0]=n=>O.value=n),placeholder:"é€‰æ‹©æä¾›å•†",onChange:xe,size:"small",style:{width:"150px"}},{default:l(()=>[(u(!0),f(X,null,Y(r.value,n=>(u(),ae(R,{key:n.id,label:n.name,value:n.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e(se,{modelValue:Z.value,"onUpdate:modelValue":t[1]||(t[1]=n=>Z.value=n),placeholder:"é€‰æ‹©æ¨¡å‹",disabled:!O.value,onChange:Oe,size:"small",style:{width:"200px"}},{default:l(()=>[(u(!0),f(X,null,Y(Q.value,n=>(u(),ae(R,{key:n.id,label:n.name,value:n.model_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])])]),_:1}),e(le,{label:"æ¸¸æˆä¸“ç”¨æ¨¡å‹"},{default:l(()=>[s("div",ta,[(u(!0),f(X,null,Y(z.value,n=>(u(),f("div",{key:n.game_id,class:"game-model-item"},[s("div",sa,[s("span",oa,b(n.name),1),e(Ie,{size:"small",type:"info"},{default:l(()=>[g(b(n.game_id),1)]),_:2},1024)]),s("div",na,[e(se,{modelValue:d[n.game_id],"onUpdate:modelValue":F=>d[n.game_id]=F,placeholder:"é€‰æ‹©æä¾›å•†",onChange:()=>Re(n.game_id),size:"small",style:{width:"150px"}},{default:l(()=>[(u(!0),f(X,null,Y(r.value,F=>(u(),ae(R,{key:F.id,label:F.name,value:F.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue","onChange"]),e(se,{modelValue:i[n.game_id],"onUpdate:modelValue":F=>i[n.game_id]=F,placeholder:"é€‰æ‹©æ¨¡å‹",disabled:!d[n.game_id],onChange:()=>Ae(n.game_id),size:"small",style:{width:"200px"}},{default:l(()=>[(u(!0),f(X,null,Y(fe(n.game_id),F=>(u(),ae(R,{key:F.id,label:F.name,value:F.model_id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onChange"])])]))),128)),!z.value||z.value.length===0?(u(),f("div",da," æš‚æ— å¯ç”¨æ¸¸æˆ ")):q("",!0)])]),_:1})]),_:1})])]),e(_l),s("div",ia,[s("div",ra,[t[17]||(t[17]=s("h3",null,"AIæœåŠ¡æä¾›å•†",-1)),e(p,{type:"primary",onClick:t[2]||(t[2]=n=>$.value=!0)},{default:l(()=>[e(oe,null,{default:l(()=>[e(v(hl))]),_:1}),t[16]||(t[16]=s("span",null,"æ·»åŠ æä¾›å•†",-1))]),_:1})]),t[24]||(t[24]=wl('<div class="info-box" data-v-a1a2ffdb><h4 class="info-title" data-v-a1a2ffdb>APIé…ç½®è¯´æ˜</h4><div class="info-content" data-v-a1a2ffdb><div data-v-a1a2ffdb><strong data-v-a1a2ffdb>OpenAIåŠå…¼å®¹æœåŠ¡ï¼š</strong>API URLå¡«å†™å®Œæ•´è·¯å¾„ï¼Œå¦‚ <code class="bg-blue-100 px-1 rounded" data-v-a1a2ffdb>https://api.openai.com/v1/chat/completions</code></div><div data-v-a1a2ffdb><strong data-v-a1a2ffdb>Anthropic Claudeï¼š</strong>API URLå¡«å†™ <code class="bg-blue-100 px-1 rounded" data-v-a1a2ffdb>https://api.anthropic.com/v1/messages</code></div><div data-v-a1a2ffdb><strong data-v-a1a2ffdb>Google Geminiï¼š</strong>API URLå¡«å†™ <code class="bg-blue-100 px-1 rounded" data-v-a1a2ffdb>https://generativelanguage.googleapis.com/v1beta</code></div><div data-v-a1a2ffdb><strong data-v-a1a2ffdb>è‡ªå®šä¹‰æä¾›å•†ï¼š</strong>å¤§å¤šæ•°ç¬¬ä¸‰æ–¹æœåŠ¡ä½¿ç”¨OpenAIå…¼å®¹æ ¼å¼</div></div></div>',1)),D.value.length===0?(u(),f("div",ua,[e(oe,{style:{"font-size":"60px",color:"#dcdfe6","margin-bottom":"16px"}},{default:l(()=>[e(v(Fe))]),_:1}),t[18]||(t[18]=s("p",null,"è¿˜æ²¡æœ‰é…ç½®ä»»ä½•AIæä¾›å•†",-1)),t[19]||(t[19]=s("p",{style:{"font-size":"14px","margin-top":"8px",color:"#909399"}},"ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æ·»åŠ æ‚¨çš„ç¬¬ä¸€ä¸ªAIæœåŠ¡",-1))])):(u(),f("div",ca,[(u(!0),f(X,null,Y(D.value,n=>{var F;return u(),f("div",{key:n.id,class:"provider-card"},[s("div",ma,[s("div",pa,[e(Ze,{modelValue:n.enabled,"onUpdate:modelValue":M=>n.enabled=M,onChange:M=>ke(n)},null,8,["modelValue","onUpdate:modelValue","onChange"]),s("h4",va,b(n.name),1),e(Ie,{size:"small",type:h(n.type)},{default:l(()=>[g(b(be(n.type)),1)]),_:2},1032,["type"]),n.enabled&&n.api_key?(u(),ae(oe,{key:0,style:{color:"#67c23a"},title:"å·²é…ç½®"},{default:l(()=>[e(v(Cl))]),_:1})):q("",!0)]),s("div",fa,[e(p,{size:"small",onClick:M=>J(n),title:"ç¼–è¾‘æä¾›å•†"},{default:l(()=>[e(oe,null,{default:l(()=>[e(v(el))]),_:1})]),_:1},8,["onClick"]),e(p,{size:"small",type:"danger",onClick:M=>_e(n),title:"åˆ é™¤æä¾›å•†"},{default:l(()=>[e(oe,null,{default:l(()=>[e(v(qe))]),_:1})]),_:1},8,["onClick"])])]),s("div",_a,[s("div",ga,[t[20]||(t[20]=s("label",{class:"field-label"},"APIå¯†é’¥",-1)),e(re,{modelValue:n.api_key,"onUpdate:modelValue":M=>n.api_key=M,type:"password","show-password":"",placeholder:"è¾“å…¥APIå¯†é’¥",onInput:M=>Ce(n)},null,8,["modelValue","onUpdate:modelValue","onInput"])]),s("div",ya,[s("label",ba,[t[21]||(t[21]=g(" API URL ",-1)),n.type!=="custom"?(u(),f("span",wa,"(å¯é€‰)")):q("",!0)]),e(re,{modelValue:n.base_url,"onUpdate:modelValue":M=>n.base_url=M,type:"url",placeholder:o(n.type),onInput:M=>Ce(n)},null,8,["modelValue","onUpdate:modelValue","placeholder","onInput"])])]),s("div",null,[s("div",ha,[s("label",ka,"å¯ç”¨æ¨¡å‹ ("+b(((F=n.models)==null?void 0:F.length)||0)+")",1),e(p,{size:"small",type:"primary",link:"",onClick:M=>Ve(n)},{default:l(()=>[...t[22]||(t[22]=[g(" æ·»åŠ æ¨¡å‹ ",-1)])]),_:1},8,["onClick"])]),s("div",Ca,[!n.models||n.models.length===0?(u(),f("div",$a," æš‚æ— æ¨¡å‹ ")):q("",!0),(u(!0),f(X,null,Y(n.models,M=>(u(),f("div",{key:M.id,class:"model-item"},[s("div",Va,[e(Ze,{modelValue:M.enabled,"onUpdate:modelValue":we=>M.enabled=we,onChange:we=>de(M)},null,8,["modelValue","onUpdate:modelValue","onChange"]),s("span",Pa,b(M.name),1),M.api_type?(u(),ae(Ie,{key:0,size:"small",type:ee(M.api_type)},{default:l(()=>[g(b(y(M.api_type)),1)]),_:2},1032,["type"])):q("",!0)]),s("div",Ma,[e(p,{size:"small",onClick:we=>Te(n,M),loading:M.id===H.value},{default:l(()=>[...t[23]||(t[23]=[g(" æµ‹è¯• ",-1)])]),_:1},8,["onClick","loading"]),e(p,{size:"small",onClick:we=>ze(n,M)},{default:l(()=>[e(oe,null,{default:l(()=>[e(v(el))]),_:1})]),_:1},8,["onClick"]),e(p,{size:"small",type:"danger",onClick:we=>ge(n,M)},{default:l(()=>[e(oe,null,{default:l(()=>[e(v(qe))]),_:1})]),_:1},8,["onClick"])])]))),128))])])])}),128))]))]),e(Ne,{modelValue:$.value,"onUpdate:modelValue":t[3]||(t[3]=n=>$.value=n),title:"é€‰æ‹©æä¾›å•†ç±»å‹",width:"500px"},{default:l(()=>[s("div",xa,[(u(),f(X,null,Y(P,n=>s("div",{key:n.value,class:"provider-type-card",onClick:F=>Ee(n.value)},[s("h4",null,b(n.label),1),s("p",null,b(n.description),1)],8,Aa)),64))])]),_:1},8,["modelValue"]),e(Ne,{modelValue:k.value,"onUpdate:modelValue":t[8]||(t[8]=n=>k.value=n),title:V.value?"ç¼–è¾‘æä¾›å•†":"æ·»åŠ æä¾›å•†",width:"500px"},{footer:l(()=>[e(p,{onClick:t[7]||(t[7]=n=>k.value=!1)},{default:l(()=>[...t[26]||(t[26]=[g("å–æ¶ˆ",-1)])]),_:1}),e(p,{type:"primary",loading:x.value,onClick:$e},{default:l(()=>[g(b(V.value?"æ›´æ–°":"æ·»åŠ "),1)]),_:1},8,["loading"])]),default:l(()=>[e(Be,{model:T.value,"label-width":"100px"},{default:l(()=>[e(le,{label:"ç±»å‹"},{default:l(()=>[e(Ie,null,{default:l(()=>[g(b(be(T.value.type)),1)]),_:1})]),_:1}),e(le,{label:"åç§°",required:""},{default:l(()=>[e(re,{modelValue:T.value.name,"onUpdate:modelValue":t[4]||(t[4]=n=>T.value.name=n),placeholder:"è¾“å…¥æä¾›å•†åç§°"},null,8,["modelValue"])]),_:1}),e(le,{label:"APIå¯†é’¥",required:""},{default:l(()=>[e(re,{modelValue:T.value.api_key,"onUpdate:modelValue":t[5]||(t[5]=n=>T.value.api_key=n),type:"password","show-password":"",placeholder:"è¾“å…¥APIå¯†é’¥"},null,8,["modelValue"])]),_:1}),e(le,{label:"API URL"},{default:l(()=>[e(re,{modelValue:T.value.base_url,"onUpdate:modelValue":t[6]||(t[6]=n=>T.value.base_url=n),type:"url",placeholder:o(T.value.type)},null,8,["modelValue","placeholder"]),t[25]||(t[25]=s("div",{style:{"font-size":"12px",color:"#909399","margin-top":"4px"}},"ç•™ç©ºä½¿ç”¨é»˜è®¤åœ°å€",-1))]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),e(Ne,{modelValue:E.value,"onUpdate:modelValue":t[13]||(t[13]=n=>E.value=n),title:A.value?"ç¼–è¾‘æ¨¡å‹":"æ·»åŠ æ¨¡å‹",width:"600px"},{footer:l(()=>[e(p,{onClick:te},{default:l(()=>[...t[28]||(t[28]=[g("å–æ¶ˆ",-1)])]),_:1}),e(p,{type:"primary",loading:x.value,onClick:pe},{default:l(()=>[g(b(A.value?"æ›´æ–°":"æ·»åŠ "),1)]),_:1},8,["loading"])]),default:l(()=>[e(Be,{model:S.value,"label-width":"100px"},{default:l(()=>[e(le,{label:"APIç±»å‹"},{default:l(()=>[e(se,{modelValue:S.value.api_type,"onUpdate:modelValue":t[9]||(t[9]=n=>S.value.api_type=n),placeholder:"é€‰æ‹©APIç±»å‹",onChange:me},{default:l(()=>[e(R,{label:"OpenAI",value:"openai"}),e(R,{label:"Anthropic",value:"anthropic"}),e(R,{label:"Google",value:"google"})]),_:1},8,["modelValue"])]),_:1}),e(le,{label:"æ¨¡å‹ID",required:""},{default:l(()=>[e(re,{modelValue:S.value.model_id,"onUpdate:modelValue":t[10]||(t[10]=n=>S.value.model_id=n),placeholder:"å¦‚ï¼šgpt-4o"},null,8,["modelValue"])]),_:1}),e(le,{label:"æ˜¾ç¤ºåç§°",required:""},{default:l(()=>[e(re,{modelValue:S.value.name,"onUpdate:modelValue":t[11]||(t[11]=n=>S.value.name=n),placeholder:"å¦‚ï¼šGPT-4o"},null,8,["modelValue"])]),_:1}),e(le,{label:""},{default:l(()=>[e(p,{onClick:Pe,loading:G.value,type:"primary"},{default:l(()=>[e(oe,null,{default:l(()=>[e(v(pl))]),_:1}),t[27]||(t[27]=g(" è·å–æ¨¡å‹åˆ—è¡¨ ",-1))]),_:1},8,["loading"]),L.value.length>0?(u(),f("span",Ia," å·²è·å– "+b(L.value.length)+" ä¸ªæ¨¡å‹ ",1)):q("",!0)]),_:1}),L.value.length>0?(u(),ae(le,{key:0,label:"æœç´¢è¿‡æ»¤"},{default:l(()=>[e(re,{modelValue:B.value,"onUpdate:modelValue":t[12]||(t[12]=n=>B.value=n),placeholder:"æœç´¢æ¨¡å‹ï¼ˆæ”¯æŒå¤šå…³é”®è¯ï¼‰",clearable:""},{prefix:l(()=>[e(oe,null,{default:l(()=>[e(v($l))]),_:1})]),_:1},8,["modelValue"])]),_:1})):q("",!0),L.value.length>0?(u(),ae(le,{key:1,label:"å¯ç”¨æ¨¡å‹"},{default:l(()=>[s("div",Ua,[(u(!0),f(X,null,Y(ce.value,n=>(u(),f("div",{key:n,class:vl(["model-select-item",{selected:S.value.model_id===n}]),onClick:F=>De(n)},b(n),11,Sa))),128)),ce.value.length===0?(u(),f("div",Ea," æ²¡æœ‰åŒ¹é…çš„æ¨¡å‹ ")):q("",!0)])]),_:1})):q("",!0),N.value?(u(),ae(gl,{key:2,type:"error",title:N.value,closable:!1,style:{"margin-bottom":"16px"}},null,8,["title"])):q("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),Ta=Xe(za,[["__scopeId","data-v-a1a2ffdb"]]);class He{static async chat(C){return await I.post("/admin/ai/chat",C)}static async chatStream(C,D,W,$){var k;try{const E=localStorage.getItem("token"),V=await fetch("http://localhost:8182/api/admin/ai/chat",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${E}`},body:JSON.stringify({...C,stream:!0})});if(!V.ok){const B=await V.text();throw new Error(`HTTP ${V.status}: ${B}`)}const A=(k=V.body)==null?void 0:k.getReader();if(!A)throw new Error("æ— æ³•è·å–å“åº”æµ");const w=new TextDecoder;let G="",L=0;for(;;){const{done:B,value:N}=await A.read();if(B){$();break}const H=w.decode(N,{stream:!0});G+=H;const z=G.split(`
`);G=z.pop()||"";for(const U of z)if(U.trim()&&!U.startsWith("event:")&&U.startsWith("data:")){const j=U.slice(5).trim();if(!j)continue;try{const O=JSON.parse(j);if(O.content!==void 0&&O.content!==""&&(L++,D(O.content)),O.done){$();return}}catch(O){console.error("[AIService] è§£æSSEæ•°æ®å¤±è´¥:",O,j)}}}}catch(E){console.error("[AIService] chatStreamé”™è¯¯:",E),W(E)}}static async testConnection(C){return await I.post("/admin/ai/test",C)}}const Da=Object.freeze(Object.defineProperty({__proto__:null,AIService:He},Symbol.toStringTag,{value:"Module"})),Ga={class:"playground"},La={class:"playground-container"},Oa={class:"chat-panel"},Ra={class:"config-bar"},Ba={style:{display:"flex","align-items":"center",gap:"8px"}},Na={class:"message-role"},ja=["innerHTML"],Fa={key:0,class:"message message-assistant"},qa={class:"input-container"},Ha={class:"input-actions"},Ka=Ke({__name:"Playground",setup(he){const C=Ye(),D=m([]),W=m([]),$=m(null),k=m(""),E=m(!0),x=m([]),V=m(""),A=m(!1),w=m(!1),G=m(),L=ue(()=>D.value.filter(i=>i.enabled)),B=ue(()=>$.value?W.value.filter(i=>i.provider_id===$.value&&i.enabled):[]),N=i=>{try{const r=Xl(i,{breaks:!0,gfm:!0});return typeof r=="string"?r:String(r)}catch{return i.replace(/\n/g,"<br>")}},H=()=>{k.value="",U()},z=async()=>{try{D.value=await C.getProviders()}catch(i){_.error("åŠ è½½æä¾›å•†å¤±è´¥: "+i.message)}},U=async()=>{if($.value)try{W.value=await C.getModels($.value)}catch(i){_.error("åŠ è½½æ¨¡å‹å¤±è´¥: "+i.message)}},j=()=>{Ml(()=>{G.value&&(G.value.scrollTop=G.value.scrollHeight)})},O=i=>{i.ctrlKey&&i.key==="Enter"&&(i.preventDefault(),Z())},Z=async()=>{if(!V.value.trim()||!k.value||!$.value)return;const i={role:"user",content:V.value.trim()};x.value.push(i),V.value="",j();try{if(E.value){w.value=!0,j();let r="",K=-1;await He.chatStream({provider_id:$.value,model_id:k.value,messages:x.value,stream:!0},Q=>{K===-1&&(w.value=!1,x.value.push({role:"assistant",content:""}),K=x.value.length-1),r+=Q,x.value[K].content=r,j()},Q=>{console.error("[Playground] onError è¢«è°ƒç”¨:",Q),w.value=!1,A.value=!1,_.error("å¯¹è¯å¤±è´¥: "+Q.message)},()=>{w.value=!1,A.value=!1,j()})}else{A.value=!0;const r=await He.chat({provider_id:$.value,model_id:k.value,messages:x.value,stream:!1});x.value.push({role:"assistant",content:r.content}),A.value=!1,j()}}catch(r){A.value=!1,w.value=!1,_.error("å‘é€æ¶ˆæ¯å¤±è´¥: "+r.message)}},d=()=>{x.value=[]};return Je(()=>{z()}),(i,r)=>{const K=ml,Q=il,fe=fl,T=We,S=Qe;return u(),f("div",Ga,[r[10]||(r[10]=s("div",{class:"playground-header"},[s("h2",null,"AI æ“ç»ƒåœº"),s("p",{class:"header-desc"},"é€‰æ‹©æä¾›å•†å’Œæ¨¡å‹è¿›è¡Œå¯¹è¯æµ‹è¯•")],-1)),s("div",La,[s("div",Oa,[s("div",Ra,[e(Q,{modelValue:$.value,"onUpdate:modelValue":r[0]||(r[0]=P=>$.value=P),placeholder:"é€‰æ‹©æä¾›å•†",onChange:H,style:{width:"200px"},size:"small"},{default:l(()=>[(u(!0),f(X,null,Y(L.value,P=>(u(),ae(K,{key:P.id,label:P.name,value:P.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e(Q,{modelValue:k.value,"onUpdate:modelValue":r[1]||(r[1]=P=>k.value=P),placeholder:"é€‰æ‹©æ¨¡å‹",disabled:!$.value,style:{width:"250px"},size:"small"},{default:l(()=>[(u(!0),f(X,null,Y(B.value,P=>(u(),ae(K,{key:P.id,label:P.name,value:P.model_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"]),s("div",Ba,[r[4]||(r[4]=s("span",{style:{"font-size":"14px",color:"#666"}},"æµå¼è¾“å‡º",-1)),e(fe,{modelValue:E.value,"onUpdate:modelValue":r[2]||(r[2]=P=>E.value=P),size:"small"},null,8,["modelValue"])]),r[6]||(r[6]=s("div",{style:{flex:"1"}},null,-1)),e(T,{size:"small",onClick:d,disabled:x.value.length===0},{default:l(()=>[...r[5]||(r[5]=[g(" æ¸…ç©ºå¯¹è¯ ",-1)])]),_:1},8,["disabled"])]),s("div",{class:"messages-container",ref_key:"messagesContainer",ref:G},[(u(!0),f(X,null,Y(x.value,(P,ce)=>(u(),f("div",{key:ce,class:vl(["message",`message-${P.role}`])},[s("div",Na,b(P.role==="user"?"ç”¨æˆ·":"AI"),1),s("div",{class:"message-content",innerHTML:N(P.content)},null,8,ja)],2))),128)),w.value?(u(),f("div",Fa,[...r[7]||(r[7]=[s("div",{class:"message-role"},"AI",-1),s("div",{class:"message-content typing-indicator"},[s("span"),s("span"),s("span")],-1)])])):q("",!0)],512),s("div",qa,[e(S,{modelValue:V.value,"onUpdate:modelValue":r[3]||(r[3]=P=>V.value=P),type:"textarea",rows:3,placeholder:"è¾“å…¥æ¶ˆæ¯... (Ctrl+Enter å‘é€)",onKeydown:O,disabled:A.value||!k.value},null,8,["modelValue","disabled"]),s("div",Ha,[r[9]||(r[9]=s("span",{class:"input-hint"},"Ctrl + Enter å‘é€",-1)),e(T,{type:"primary",onClick:Z,loading:A.value,disabled:!V.value.trim()||!k.value},{default:l(()=>[...r[8]||(r[8]=[g(" å‘é€ ",-1)])]),_:1},8,["loading","disabled"])])])])])])}}}),Ja=Xe(Ka,[["__scopeId","data-v-362b6de1"]]),Wa={class:"admin-container"},Qa={class:"header-content"},Xa={class:"mobile-menu-btn"},Ya={class:"breadcrumb"},Za={class:"mobile-title"},et={class:"user-info"},lt={class:"el-dropdown-link"},at={key:0,class:"overview-content"},tt={class:"stats-item"},st={class:"stats-number"},ot={class:"stats-item"},nt={class:"stats-number"},dt={class:"stats-item"},it={class:"stats-number"},rt={key:1},ut={class:"card-header"},ct={class:"table-container pc-table"},mt={class:"action-buttons"},pt={class:"mobile-user-list"},vt={class:"user-info"},ft={class:"user-header"},_t={class:"username"},gt={class:"user-detail"},yt={class:"detail-item"},bt={class:"detail-value"},wt={class:"detail-item"},ht={class:"detail-value"},kt={class:"user-actions"},Ct={key:2},$t={key:3},Vt={key:4},Pt={class:"mobile-sidebar"},Mt={class:"dialog-footer"},xt=Ke({__name:"AdminView",setup(he){const C=Al(),D=xl(),W=Ye(),$=m(!1),k=m([]),E=m(!1),x=m(!1),V=m(null),A=m(),w=m("overview"),G=m(!1),L=ue(()=>k.value.length),B=ue(()=>k.value.filter(h=>h.is_admin).length),N=m(0),H=ye({siteName:"AI Game Engine",siteDescription:"ä¸€ä¸ªåŸºäºAIçš„æ–‡å­—å†’é™©æ¸¸æˆå¼•æ“",allowRegister:!0}),z=ye({newPassword:"",confirmPassword:""}),j=ye({newPassword:[{required:!0,message:"è¯·è¾“å…¥æ–°å¯†ç ",trigger:"blur"},{min:6,message:"å¯†ç é•¿åº¦ä¸èƒ½å°‘äº 6 ä½",trigger:"blur"}],confirmPassword:[{required:!0,message:"è¯·ç¡®è®¤å¯†ç ",trigger:"blur"},{validator:(h,o,y)=>{o!==z.newPassword?y(new Error("ä¸¤æ¬¡è¾“å…¥å¯†ç ä¸ä¸€è‡´")):y()},trigger:"blur"}]});Je(()=>{if(!D.isAdmin()){C.push("/chat");return}r()});const O=h=>{w.value=h,h==="users"&&r()},Z=()=>{G.value=!G.value},d=h=>{w.value=h,G.value=!1,h==="users"&&r()},i=()=>({overview:"æ¦‚è§ˆ",users:"ç”¨æˆ·ç®¡ç†",providers:"æä¾›å•†ç®¡ç†",playground:"æ“ç»ƒåœº",system:"ç³»ç»Ÿè®¾ç½®"})[w.value]||"æ¦‚è§ˆ",r=async()=>{$.value=!0;try{k.value=await W.getUsers()}catch(h){console.error("è·å–ç”¨æˆ·åˆ—è¡¨å¤±è´¥:",h)}finally{$.value=!1}},K=()=>{r()},Q=h=>{V.value=h,z.newPassword="",z.confirmPassword="",E.value=!0},fe=async()=>{if(!(!A.value||!V.value))try{if(!await A.value.validate())return;x.value=!0,await W.updateUserPassword(V.value.id,z.newPassword),_.success("å¯†ç ä¿®æ”¹æˆåŠŸ"),E.value=!1}catch(h){console.error("å¯†ç ä¿®æ”¹å¤±è´¥:",h)}finally{x.value=!1}},T=async h=>{try{await Se.confirm(`ç¡®å®šè¦${h.is_admin?"å–æ¶ˆ":"è®¾ç½®"}ç”¨æˆ· "${h.username}" çš„ç®¡ç†å‘˜æƒé™å—ï¼Ÿ`,"ç¡®è®¤æ“ä½œ",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}),await W.toggleUserAdmin(h.id),_.success("æƒé™ä¿®æ”¹æˆåŠŸ"),await r()}catch(o){o!=="cancel"&&console.error("æƒé™ä¿®æ”¹å¤±è´¥:",o)}},S=async h=>{try{await Se.confirm(`ç¡®å®šè¦åˆ é™¤ç”¨æˆ· "${h.username}" å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼`,"ç¡®è®¤åˆ é™¤",{confirmButtonText:"åˆ é™¤",cancelButtonText:"å–æ¶ˆ",type:"warning"}),await W.deleteUser(h.id),_.success("ç”¨æˆ·åˆ é™¤æˆåŠŸ"),await r()}catch(o){o!=="cancel"&&console.error("ç”¨æˆ·åˆ é™¤å¤±è´¥:",o)}},P=()=>{D.logout()},ce=()=>{C.push("/chat")},be=()=>{_.success("ç³»ç»Ÿè®¾ç½®å·²ä¿å­˜")};return(h,o)=>{const y=ul,ee=zl,ne=El,Ee=Sl,J=We,ke=Ll,Ce=Gl,_e=Nl,$e=Bl,Ve=Ol,ze=Tl,de=Hl,ge=ql,Te=Fl,me=Jl,Pe=rl,De=Ql,pe=Qe,te=dl,Ge=fl,Me=nl,Le=jl,xe=Il,Oe=Ul,Re=cl,Ae=Kl;return u(),f("div",Wa,[e(xe,{style:{height:"100vh"}},{default:l(()=>[e(Ee,{width:"250px",class:"admin-sidebar pc-sidebar"},{default:l(()=>[e(ne,{"default-active":w.value,class:"admin-menu","background-color":"#001529","text-color":"#ffffff","active-text-color":"#1890ff",onSelect:O},{default:l(()=>[e(ee,{index:"overview"},{default:l(()=>[e(y,null,{default:l(()=>[e(v(ll))]),_:1}),o[8]||(o[8]=s("span",null,"æ¦‚è§ˆ",-1))]),_:1}),e(ee,{index:"users"},{default:l(()=>[e(y,null,{default:l(()=>[e(v(al))]),_:1}),o[9]||(o[9]=s("span",null,"ç”¨æˆ·ç®¡ç†",-1))]),_:1}),e(ee,{index:"providers"},{default:l(()=>[e(y,null,{default:l(()=>[e(v(tl))]),_:1}),o[10]||(o[10]=s("span",null,"æä¾›å•†ç®¡ç†",-1))]),_:1}),e(ee,{index:"playground"},{default:l(()=>[e(y,null,{default:l(()=>[e(v(Ue))]),_:1}),o[11]||(o[11]=s("span",null,"æ“ç»ƒåœº",-1))]),_:1}),e(ee,{index:"system"},{default:l(()=>[e(y,null,{default:l(()=>[e(v(Fe))]),_:1}),o[12]||(o[12]=s("span",null,"ç³»ç»Ÿè®¾ç½®",-1))]),_:1})]),_:1},8,["default-active"])]),_:1}),e(xe,null,{default:l(()=>[e(ze,{class:"admin-header"},{default:l(()=>[s("div",Qa,[s("div",Xa,[e(J,{type:"text",onClick:Z,class:"menu-toggle",size:"large"},{default:l(()=>[e(y,{size:"20"},{default:l(()=>[e(v(Dl))]),_:1})]),_:1})]),s("div",Ya,[e(Ce,{separator:"/",class:"pc-breadcrumb"},{default:l(()=>[e(ke,null,{default:l(()=>[...o[13]||(o[13]=[g("ç®¡ç†åå°",-1)])]),_:1}),e(ke,null,{default:l(()=>[g(b(i()),1)]),_:1})]),_:1}),s("h3",Za,b(i()),1)]),s("div",et,[e(Ve,{class:"pc-user-dropdown"},{dropdown:l(()=>[e($e,null,{default:l(()=>[e(_e,{onClick:ce},{default:l(()=>[e(y,null,{default:l(()=>[e(v(Ue))]),_:1}),o[14]||(o[14]=g(" è¿”å›ä¸»é¡µ ",-1))]),_:1}),e(_e,{divided:"",onClick:P},{default:l(()=>[e(y,null,{default:l(()=>[e(v(sl))]),_:1}),o[15]||(o[15]=g(" é€€å‡ºç™»å½• ",-1))]),_:1})]),_:1})]),default:l(()=>{var c;return[s("span",lt,[e(y,null,{default:l(()=>[e(v(je))]),_:1}),g(" "+b((c=v(D).user)==null?void 0:c.username)+" ",1),e(y,{class:"el-icon--right"},{default:l(()=>[e(v(Rl))]),_:1})])]}),_:1}),e(Ve,{class:"mobile-user-dropdown"},{dropdown:l(()=>[e($e,null,{default:l(()=>[e(_e,{onClick:ce},{default:l(()=>[e(y,null,{default:l(()=>[e(v(Ue))]),_:1}),o[16]||(o[16]=g(" è¿”å›ä¸»é¡µ ",-1))]),_:1}),e(_e,{divided:"",onClick:P},{default:l(()=>[e(y,null,{default:l(()=>[e(v(sl))]),_:1}),o[17]||(o[17]=g(" é€€å‡ºç™»å½• ",-1))]),_:1})]),_:1})]),default:l(()=>[e(J,{type:"text",size:"large"},{default:l(()=>[e(y,{size:"20"},{default:l(()=>[e(v(je))]),_:1})]),_:1})]),_:1})])])]),_:1}),e(Le,{class:"admin-main"},{default:l(()=>[w.value==="overview"?(u(),f("div",at,[e(Te,{gutter:20},{default:l(()=>[e(ge,{xs:12,sm:12,md:6,lg:6,xl:6},{default:l(()=>[e(de,{class:"stats-card"},{default:l(()=>[s("div",tt,[s("div",st,b(L.value),1),o[18]||(o[18]=s("div",{class:"stats-label"},"æ€»ç”¨æˆ·æ•°",-1))])]),_:1})]),_:1}),e(ge,{xs:12,sm:12,md:6,lg:6,xl:6},{default:l(()=>[e(de,{class:"stats-card"},{default:l(()=>[s("div",ot,[s("div",nt,b(B.value),1),o[19]||(o[19]=s("div",{class:"stats-label"},"ç®¡ç†å‘˜æ•°",-1))])]),_:1})]),_:1}),e(ge,{xs:12,sm:12,md:6,lg:6,xl:6},{default:l(()=>[e(de,{class:"stats-card"},{default:l(()=>[s("div",dt,[s("div",it,b(N.value),1),o[20]||(o[20]=s("div",{class:"stats-label"},"å¯¹è¯æ€»æ•°",-1))])]),_:1})]),_:1}),e(ge,{xs:12,sm:12,md:6,lg:6,xl:6},{default:l(()=>[e(de,{class:"stats-card"},{default:l(()=>[...o[21]||(o[21]=[s("div",{class:"stats-item"},[s("div",{class:"stats-number"},"Online"),s("div",{class:"stats-label"},"ç³»ç»ŸçŠ¶æ€")],-1)])]),_:1})]),_:1})]),_:1})])):q("",!0),w.value==="users"?(u(),f("div",rt,[e(de,null,{header:l(()=>[s("div",ut,[o[23]||(o[23]=s("span",null,"ç”¨æˆ·ç®¡ç†",-1)),e(J,{type:"primary",onClick:K},{default:l(()=>[e(y,null,{default:l(()=>[e(v(pl))]),_:1}),o[22]||(o[22]=g(" åˆ·æ–° ",-1))]),_:1})])]),default:l(()=>[s("div",ct,[ol((u(),ae(De,{data:k.value,style:{width:"100%"},class:"responsive-table"},{default:l(()=>[e(me,{prop:"id",label:"ID",width:"80"}),e(me,{prop:"username",label:"ç”¨æˆ·å","min-width":"120"}),e(me,{prop:"email",label:"é‚®ç®±","min-width":"180"}),e(me,{prop:"is_admin",label:"ç®¡ç†å‘˜",width:"100"},{default:l(c=>[e(Pe,{type:c.row.is_admin?"success":"info",size:"small"},{default:l(()=>[g(b(c.row.is_admin?"æ˜¯":"å¦"),1)]),_:2},1032,["type"])]),_:1}),e(me,{label:"æ“ä½œ","min-width":"200"},{default:l(c=>{var ie,ve;return[s("div",mt,[e(J,{size:"small",onClick:a=>Q(c.row)},{default:l(()=>[...o[24]||(o[24]=[g(" å¯†ç  ",-1)])]),_:1},8,["onClick"]),e(J,{size:"small",type:"warning",onClick:a=>T(c.row),disabled:c.row.id===((ie=v(D).user)==null?void 0:ie.id)},{default:l(()=>[g(b(c.row.is_admin?"å–æ¶ˆ":"è®¾ç½®"),1)]),_:2},1032,["onClick","disabled"]),e(J,{size:"small",type:"danger",onClick:a=>S(c.row),disabled:c.row.id===((ve=v(D).user)==null?void 0:ve.id)},{default:l(()=>[...o[25]||(o[25]=[g(" åˆ é™¤ ",-1)])]),_:1},8,["onClick","disabled"])])]}),_:1})]),_:1},8,["data"])),[[Ae,$.value]])]),ol((u(),f("div",pt,[(u(!0),f(X,null,Y(k.value,c=>{var ie,ve;return u(),f("div",{class:"mobile-user-card",key:c.id},[s("div",vt,[s("div",ft,[s("span",_t,b(c.username),1),e(Pe,{type:c.is_admin?"success":"info",size:"small"},{default:l(()=>[g(b(c.is_admin?"ç®¡ç†å‘˜":"æ™®é€šç”¨æˆ·"),1)]),_:2},1032,["type"])]),s("div",gt,[s("div",yt,[o[26]||(o[26]=s("span",{class:"detail-label"},"ID:",-1)),s("span",bt,b(c.id),1)]),s("div",wt,[o[27]||(o[27]=s("span",{class:"detail-label"},"é‚®ç®±:",-1)),s("span",ht,b(c.email||"æœªè®¾ç½®"),1)])])]),s("div",kt,[e(J,{size:"small",onClick:a=>Q(c),class:"mobile-action-btn"},{default:l(()=>[e(y,null,{default:l(()=>[e(v(Wl))]),_:1})]),_:1},8,["onClick"]),e(J,{size:"small",type:"warning",onClick:a=>T(c),disabled:c.id===((ie=v(D).user)==null?void 0:ie.id),class:"mobile-action-btn"},{default:l(()=>[e(y,null,{default:l(()=>[e(v(je))]),_:1})]),_:1},8,["onClick","disabled"]),e(J,{size:"small",type:"danger",onClick:a=>S(c),disabled:c.id===((ve=v(D).user)==null?void 0:ve.id),class:"mobile-action-btn"},{default:l(()=>[e(y,null,{default:l(()=>[e(v(qe))]),_:1})]),_:1},8,["onClick","disabled"])])])}),128))])),[[Ae,$.value]])]),_:1})])):q("",!0),w.value==="providers"?(u(),f("div",Ct,[e(Ta)])):q("",!0),w.value==="playground"?(u(),f("div",$t,[e(Ja)])):q("",!0),w.value==="system"?(u(),f("div",Vt,[e(de,null,{header:l(()=>[...o[28]||(o[28]=[s("span",null,"ç³»ç»Ÿè®¾ç½®",-1)])]),default:l(()=>[e(Me,{"label-width":"120px",class:"system-form"},{default:l(()=>[e(te,{label:"ç³»ç»Ÿåç§°"},{default:l(()=>[e(pe,{modelValue:H.siteName,"onUpdate:modelValue":o[0]||(o[0]=c=>H.siteName=c),placeholder:"AI Chat System"},null,8,["modelValue"])]),_:1}),e(te,{label:"ç³»ç»Ÿæè¿°"},{default:l(()=>[e(pe,{type:"textarea",modelValue:H.siteDescription,"onUpdate:modelValue":o[1]||(o[1]=c=>H.siteDescription=c),placeholder:"ä¸€ä¸ªåŸºäºAIçš„æ™ºèƒ½å¯¹è¯ç³»ç»Ÿ",rows:3},null,8,["modelValue"])]),_:1}),e(te,{label:"å…è®¸æ³¨å†Œ"},{default:l(()=>[e(Ge,{modelValue:H.allowRegister,"onUpdate:modelValue":o[2]||(o[2]=c=>H.allowRegister=c)},null,8,["modelValue"])]),_:1}),e(te,{class:"form-actions"},{default:l(()=>[e(J,{type:"primary",onClick:be,class:"save-btn"},{default:l(()=>[...o[29]||(o[29]=[g("ä¿å­˜è®¾ç½®",-1)])]),_:1})]),_:1})]),_:1})]),_:1})])):q("",!0)]),_:1})]),_:1})]),_:1}),e(Oe,{modelValue:G.value,"onUpdate:modelValue":o[3]||(o[3]=c=>G.value=c),direction:"ltr",size:"280px","with-header":!1,class:"mobile-menu-drawer"},{default:l(()=>[s("div",Pt,[e(ne,{"default-active":w.value,class:"mobile-admin-menu","background-color":"#001529","text-color":"#ffffff","active-text-color":"#1890ff",onSelect:d},{default:l(()=>[e(ee,{index:"overview"},{default:l(()=>[e(y,null,{default:l(()=>[e(v(ll))]),_:1}),o[30]||(o[30]=s("span",null,"æ¦‚è§ˆ",-1))]),_:1}),e(ee,{index:"users"},{default:l(()=>[e(y,null,{default:l(()=>[e(v(al))]),_:1}),o[31]||(o[31]=s("span",null,"ç”¨æˆ·ç®¡ç†",-1))]),_:1}),e(ee,{index:"providers"},{default:l(()=>[e(y,null,{default:l(()=>[e(v(tl))]),_:1}),o[32]||(o[32]=s("span",null,"æä¾›å•†ç®¡ç†",-1))]),_:1}),e(ee,{index:"playground"},{default:l(()=>[e(y,null,{default:l(()=>[e(v(Ue))]),_:1}),o[33]||(o[33]=s("span",null,"æ“ç»ƒåœº",-1))]),_:1}),e(ee,{index:"system"},{default:l(()=>[e(y,null,{default:l(()=>[e(v(Fe))]),_:1}),o[34]||(o[34]=s("span",null,"ç³»ç»Ÿè®¾ç½®",-1))]),_:1})]),_:1},8,["default-active"])])]),_:1},8,["modelValue"]),e(Re,{modelValue:E.value,"onUpdate:modelValue":o[7]||(o[7]=c=>E.value=c),title:"ä¿®æ”¹ç”¨æˆ·å¯†ç ",width:"400px"},{footer:l(()=>[s("div",Mt,[e(J,{onClick:o[6]||(o[6]=c=>E.value=!1)},{default:l(()=>[...o[35]||(o[35]=[g("å–æ¶ˆ",-1)])]),_:1}),e(J,{type:"primary",onClick:fe,loading:x.value},{default:l(()=>[...o[36]||(o[36]=[g(" ç¡®è®¤ ",-1)])]),_:1},8,["loading"])])]),default:l(()=>[e(Me,{model:z,rules:j,ref_key:"passwordFormRef",ref:A},{default:l(()=>[e(te,{label:"ç”¨æˆ·å"},{default:l(()=>{var c;return[e(pe,{value:(c=V.value)==null?void 0:c.username,disabled:""},null,8,["value"])]}),_:1}),e(te,{label:"æ–°å¯†ç ",prop:"newPassword"},{default:l(()=>[e(pe,{modelValue:z.newPassword,"onUpdate:modelValue":o[4]||(o[4]=c=>z.newPassword=c),type:"password",placeholder:"è¯·è¾“å…¥æ–°å¯†ç ","show-password":""},null,8,["modelValue"])]),_:1}),e(te,{label:"ç¡®è®¤å¯†ç ",prop:"confirmPassword"},{default:l(()=>[e(pe,{modelValue:z.confirmPassword,"onUpdate:modelValue":o[5]||(o[5]=c=>z.confirmPassword=c),type:"password",placeholder:"è¯·ç¡®è®¤æ–°å¯†ç ","show-password":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}}),Et=Xe(xt,[["__scopeId","data-v-36b8b41d"]]);export{Et as default};
